{% load tz %}

<div id="share_to">
    <div class="bshare-custom">
        <span style="font-size:14px;">分享到:</span> 
        <a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
        <a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a>
        <a title="分享到Gmail" class="bshare-gmail" href="javascript:void(0);"></a>
        <a title="分享到Facebook" class="bshare-facebook" href="javascript:void(0);"></a>
        <a title="分享到Twitter" class="bshare-twitter" href="javascript:void(0);"></a>
        <a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
    </div>
    <script type="text/javascript" src="https://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
    <script type="text/javascript" src="https://static.bshare.cn/b/bshareC0.js"></script>

    <div class="share-to-google-calendar">
        <a id="google-calendar_link" target="_blank">添到 Google 日历</a>
        <script type="text/javascript">
            (function(anchor) {
                var text = '{{ this_event.name|urlencode }}',
                    dates = [
                        '{{ this_event.begin_time|utc|date:"Ymd\THis\Z"|urlencode }}',
                        '{{ this_event.end_time|utc|date:"Ymd\THis\Z"|urlencode }}',
                    ].join('/'),
                    sprop = encodeURIComponent('website:' + window.location.href),
                    location = '{{ this_event.address|urlencode }}';
                anchor.href = 'https://www.google.com/calendar/event?action=TEMPLATE&text=' + text +
                    '&dates=' + dates + '&sprop=' + sprop + '&location=' + location + '&output=xml';
            })(document.getElementById('google-calendar_link'))
        </script>
    </div>
</div>
